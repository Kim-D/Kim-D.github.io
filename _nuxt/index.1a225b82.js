import I from"./Icon.54269085.js";import{_ as L}from"./nuxt-link.0282fad6.js";import{r as b,u as A}from"./api.882d370b.js";import{_ as B,o as d,c as C,a as m,v as g,f as E,g as M,y as N,r as P,j as y,w as a,b as s,m as F,t as T,F as G,n as j}from"./entry.bf64b599.js";import{u as V}from"./index.0d8a044b.js";import{L as q,a as z}from"./List.b3513e41.js";import{_ as D}from"./Stack.vue.f2e87cfc.js";import{_ as w}from"./Flex.vue.05e8867f.js";import{T as f,a as O}from"./task.constant.13c2168f.js";import{b as W}from"./task.api.46ccf832.js";import{t as Y}from"./index.6949dd38.js";import"./index.df58e121.js";const H={},J={class:"d-card d-card-compact"},K={class:"d-card-body"},Q={class:"d-card-title"};function R(i,_){return d(),C("div",J,[m("div",K,[m("div",Q,[g(i.$slots,"title")]),g(i.$slots,"default")])])}const U=B(H,[["render",R]]);function X(i){return b({endpoint:`/common-codes/${i}`})}const mt=E({__name:"index",setup(i){V("친환경음식물처리기");const _=A(),$=M.useLoading({color:"#0000ff",loader:"bars",canCancel:!1}),p=N(),l=P([{icon:"mdi:package-variant-closed-plus",title:"설치",link:`/work-management?taskType=${f.설치}`,actions:"0건"},{icon:"mdi:cog-sync",title:"AS",link:`/work-management?taskType=${f.AS}`,actions:"0건"},{icon:"mdi:wrench-clock",title:"정기점검",link:`/work-management?taskType=${f.정기점검}`,actions:"0건"},{icon:"mdi:account-cog",title:"고객 관리",link:"/customer"},{icon:"mdi:account-group",title:"작업조",link:"/task-team"},{icon:"mdi:location-enter",title:"작업 배정",link:`/work-management?taskStatus=${O.미배정}`}]);Y(async()=>{await j();let t="";const n=$.show();W().then(c=>{const r=c.data;r&&r.length>0&&X("FSTYPE").then(e=>{const u=e.data;for(const v in l.value){const k=l.value[v],h=u.find(o=>o.codeNm.trim()===k.title);if(h){const o=r.find(S=>S.typeCd===h.commonCodeId.codeCd);k.actions=`${o!=null&&o.count?o.count:0}건`}}}).catch(e=>{t=e.message}).finally(()=>{n.hide(),t.length>0&&p.add({type:"error",text:t})})}).catch(c=>{t=c.message}).finally(()=>{t.length>0&&(n.hide(),p.add({type:"error",text:t}))})});function x(){if(_.isTaskMember()){const t=[];return l.value.forEach(n=>{n.title==="작업조"||n.title==="작업 배정"||t.push(n)}),t}return l.value}return(t,n)=>{const c=I,r=L;return d(),y(z,null,{default:a(()=>[s(D,null,{default:a(()=>[(d(!0),C(G,null,F(x(),(e,u)=>(d(),y(q,{key:u,class:"shadow w-full"},{default:a(()=>[s(r,{to:e.link},{default:a(()=>[s(w,{align:"center"},{default:a(()=>[s(c,{name:e.icon,size:"30"},null,8,["name"]),s(U,{class:"w-full"},{title:a(()=>[s(w,{justify:"between"},{default:a(()=>[m("div",null,T(e.title),1),m("div",null,T(e.actions??""),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})]),_:1})}}});export{mt as default};
