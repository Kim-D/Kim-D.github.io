import N from"./Icon.85766b0e.js";import{f as S,r as y,g as V,y as j,o as i,c as f,b as e,w as a,d as n,t as u,k as m,F as T,m as C,j as D,H as K,l as q,I as w}from"./entry.c4ebd43d.js";import{u as I}from"./useModal.1d49dae4.js";import{u as z}from"./index.f27507dc.js";import{_ as E,a as F}from"./Divider.vue.c1daa5d1.js";import{a as G,L as H}from"./List.cebf833c.js";import{K as O}from"./KSwipeModal.fccfb107.js";import{K as d}from"./KButton.55ae4892.js";import{B as P}from"./Box.03872979.js";import{_ as p}from"./Flex.vue.8a6b864f.js";import{_ as R}from"./Stack.vue.bd4d8877.js";import{T as U}from"./Text.bed8161d.js";import{e as A,f as v}from"./task-team.api.9af4120b.js";import{t as J}from"./index.d7501e1d.js";import"./index.df58e121.js";import"./Button.a6d1e8d0.js";import"./nuxt-link.3df1dd84.js";import"./Avatar.cca694e9.js";import"./api.184bdff1.js";const _e=S({__name:"index",setup(Q){z("작업조 관리");const c=y([]),{value:_,toggle:k}=I(),h=y(),x=V.useLoading({color:"#0000ff",loader:"bars",canCancel:!1}),g=j();function $(){w("/task-team/create")}function b(t){w(`/task-team/detail/${t.teamSeq}`)}function B(t){h.value=t,k()}function L(){let t="";const l=x.show();A(h.value.teamSeq).then(o=>{var s;((s=o.data)==null?void 0:s.message)==="success"&&v().then(r=>{c.value=r.data}).catch(r=>{t=r.message}).finally(()=>{l.hide(),t.length>0&&g.add({type:"error",text:t})})}).catch(o=>{t=o.message}).finally(()=>{t.length>0&&(l.hide(),g.add({type:"error",text:t}))}),k()}return J(()=>{const t=x.show();let l="";v().then(o=>{c.value=o.data}).catch(o=>{l=o.message}).finally(()=>{t.hide(),l.length>0&&g.add({type:"error",text:l})})}),(t,l)=>{const o=N;return i(),f(T,null,[e(R,{class:"h-full"},{default:a(()=>[e(d,{width:"wide",onClick:$},{default:a(()=>[n(" 작업조 등록 ")]),_:1}),e(E,null,{default:a(()=>[n(u(m(c).length),1)]),_:1}),e(F),e(G,null,{default:a(()=>[(i(!0),f(T,null,C(m(c),s=>(i(),D(H,{key:s.teamSeq,onClick:r=>b(s)},{default:a(()=>[e(P,null,{default:a(()=>[e(p,{justify:"between",align:"center"},{default:a(()=>[e(U,null,{default:a(()=>[n(u(s.teamNm),1)]),_:2},1024),e(d,{variant:"ghost",size:"sm",width:"fit",onClick:K(r=>B(s),["stop"])},{default:a(()=>[e(o,{name:"ic:baseline-close",class:"text-xl"})]),_:2},1032,["onClick"])]),_:2},1024),e(p,{direction:"row",align:"center"},{default:a(()=>[e(o,{name:"ic:sharp-person",size:"24"}),e(p,{direction:"row",justify:"start",align:"center",gap:8,wrap:""},{default:a(()=>[(i(!0),f(T,null,C(s.members,(r,M)=>(i(),f("span",{key:M},u(r.userNm),1))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),e(O,{modelValue:m(_),"onUpdate:modelValue":l[0]||(l[0]=s=>q(_)?_.value=s:null),height:"120px"},{title:a(()=>{var s;return[n(u((s=m(h))==null?void 0:s.teamNm)+" 삭제하시겠습니까? ",1)]}),default:a(()=>[e(p,{justify:"around",class:"mt-4"},{default:a(()=>[e(d,{class:"flex-1",onClick:m(k)},{default:a(()=>[n(" 취소 ")]),_:1},8,["onClick"]),e(d,{color:"error",class:"flex-1",onClick:L},{default:a(()=>[n(" 삭제 ")]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{_e as default};
